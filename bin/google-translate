#!/usr/bin/zsh

urlencode() {
    setopt localoptions extendedglob
    input=( ${(s::)1} )
    print ${(j::)input/(#b)([^A-Za-z0-9_.\!~*\'\(\)-])/%${(l:2::0:)$(([##16]#match))}}
}

if [ $XDG_SESSION_TYPE = wayland ]
then
	temp=$(wl-paste --primary)
else
	temp=$(xsel -o)
fi

gtk-launch $(xdg-settings get default-web-browser) 'https://translate.google.com/?sl=en&tl=pt&text='"$(urlencode $temp)"'&op=translate'
